{"ast":null,"code":"var _s = $RefreshSig$();\n// import { useEffect, useRef } from \"react\";\n\n// export function useOnDraw(onDraw){\n//     const canvasRef = useRef(null);\n\n//     const isDrawingRef = useRef(false);\n\n//     const mouseMoveListenerRef = useRef(null);\n//     const mouseDownListenerRef = useRef(null);\n//     const mouseUpListenerRef = useRef(null);\n\n//     useEffect(() => {\n//         return () => {\n//             if(mouseMoveListenerRef.current) {\n//                 window.removeEventListener(\"mousemove\", mouseMoveListenerRef.current)\n//             }\n//             if(mouseUpListenerRef.current) {\n//                 window.removeEventListener(\"mouseup\", mouseUpListenerRef.current)\n//             }\n//         }\n//     })\n\n//     function setCanvasRef(ref){\n//         if(!ref) return;\n//         if(canvasRef.current){\n//             canvasRef.current.removeEventListener(\"mousedown\", mouseDownListenerRef.current);\n//         }\n//         canvasRef.current = ref;\n//         initMouseMoveListener();\n//         initMouseDownListener();\n//         initMouseUpListener();\n//     }\n\n//     function initMouseMoveListener(){\n//         const mouseMoveListener = (e) =>{\n//             if(isDrawingRef.current == true){\n//                 const point = computePointInCanvas(e.clientX, e.clientY);\n//                 console.log('point:' + point)\n//                 // const point = {x: e.clientX, y:e.clientY};\n//                 const ctx = canvasRef.current.getContext('2d');\n//                 if(onDraw) onDraw(ctx, point);\n//             }\n//         }\n//         mouseMoveListenerRef.current = mouseMoveListener;\n//         window.addEventListener('mousemove', mouseMoveListener)\n//     }\n\n//     function initMouseDownListener(){\n//         if (!canvasRef.current) return;\n//         const listener = () => {\n//             isDrawingRef.current = true;\n//         }\n//         mouseDownListenerRef.current = listener;\n//         canvasRef.current.addEventListener(\"mousedown\", listener);\n//     }\n\n//     function initMouseUpListener(){\n//         if (!canvasRef.current) return;\n//         const listener = () => {\n//             isDrawingRef.current = false;\n//         }\n//         mouseUpListenerRef.current = listener;\n//         window.addEventListener(\"mouseup\", listener);\n//     }\n\n//     // so that x and y coords are relative to canvas, not entire window\n//     function computePointInCanvas(clientX, clientY){\n//         if(canvasRef.current){\n//             const boundingRect = canvasRef.current.getBoundingClientRect();\n//             return{\n//                 x: clientX - boundingRect.left,\n//                 y: clientY - boundingRect.top\n//             }\n//         } else{\n//             return null;\n//         }\n\n//     }\n\n//     return setCanvasRef;\n// }\n\nimport { useEffect, useRef } from \"react\";\nexport function useOnDraw(onDraw) {\n  _s();\n  const canvasRef = useRef(null);\n  const isDrawingRef = useRef(false);\n  const mouseMoveListenerRef = useRef(null);\n  const mouseDownListenerRef = useRef(null);\n  const mouseUpListenerRef = useRef(null);\n  useEffect(() => {\n    return () => {\n      if (mouseMoveListenerRef.current) {\n        window.removeEventListener(\"mousemove\", mouseMoveListenerRef.current);\n      }\n      if (mouseUpListenerRef.current) {\n        window.removeEventListener(\"mouseup\", mouseUpListenerRef.current);\n      }\n      if (canvasRef.current) {\n        window.removeEventListener(\"mousedown\", mouseDownListenerRef.current);\n      }\n    };\n  });\n  function setCanvasRef(ref) {\n    if (!ref) return;\n    canvasRef.current = ref;\n    initMouseMoveListener();\n    initMouseDownListener();\n    initMouseUpListener();\n  }\n  function initMouseMoveListener() {\n    const mouseMoveListener = e => {\n      if (isDrawingRef.current == true) {\n        const point = computePointInCanvas(e.clientX, e.clientY);\n        console.log('point:' + point.x, point.y);\n        // const point = {x: e.clientX, y:e.clientY};\n        const ctx = canvasRef.current.getContext('2d');\n        if (onDraw) onDraw(ctx, point);\n      }\n    };\n    mouseMoveListenerRef.current = mouseMoveListener;\n    window.addEventListener('mousemove', mouseMoveListener);\n  }\n  function initMouseDownListener() {\n    if (!canvasRef.current) return;\n    const listener = () => {\n      isDrawingRef.current = true;\n    };\n    mouseDownListenerRef.current = listener;\n    // canvasRef.current.addEventListener(\"mousedown\", listener);\n    window.addEventListener(\"mousedown\", listener);\n  }\n  function initMouseUpListener() {\n    if (!canvasRef.current) return;\n    const listener = () => {\n      isDrawingRef.current = false;\n    };\n    mouseUpListenerRef.current = listener;\n    window.addEventListener(\"mouseup\", listener);\n  }\n\n  // so that x and y coords are relative to canvas, not entire window\n  function computePointInCanvas(clientX, clientY) {\n    if (canvasRef.current) {\n      const boundingRect = canvasRef.current.getBoundingClientRect();\n      console.log('boundingRect:' + boundingRect + 'top:' + boundingRect.top + ', ' + boundingRect.left);\n      return {\n        x: (clientX - boundingRect.left) / ((boundingRect.right - boundingRect.left) / 300),\n        y: (clientY - boundingRect.top) / ((boundingRect.bottom - boundingRect.top) / 150)\n      };\n    } else {\n      return null;\n    }\n  }\n  return setCanvasRef;\n}\n_s(useOnDraw, \"eVCpjS4KqCropBSa8+sN4+9SJJg=\");","map":{"version":3,"names":["useEffect","useRef","useOnDraw","onDraw","canvasRef","isDrawingRef","mouseMoveListenerRef","mouseDownListenerRef","mouseUpListenerRef","current","window","removeEventListener","setCanvasRef","ref","initMouseMoveListener","initMouseDownListener","initMouseUpListener","mouseMoveListener","e","point","computePointInCanvas","clientX","clientY","console","log","x","y","ctx","getContext","addEventListener","listener","boundingRect","getBoundingClientRect","top","left","right","bottom"],"sources":["/Users/anyiwang/Library/CloudStorage/OneDrive-NanyangTechnologicalUniversity/FYP/UI/react_basics/reactapp1/src/components/hooks.js"],"sourcesContent":["// import { useEffect, useRef } from \"react\";\n\n// export function useOnDraw(onDraw){\n//     const canvasRef = useRef(null);\n\n//     const isDrawingRef = useRef(false);\n\n//     const mouseMoveListenerRef = useRef(null);\n//     const mouseDownListenerRef = useRef(null);\n//     const mouseUpListenerRef = useRef(null);\n\n//     useEffect(() => {\n//         return () => {\n//             if(mouseMoveListenerRef.current) {\n//                 window.removeEventListener(\"mousemove\", mouseMoveListenerRef.current)\n//             }\n//             if(mouseUpListenerRef.current) {\n//                 window.removeEventListener(\"mouseup\", mouseUpListenerRef.current)\n//             }\n//         }\n//     })\n\n//     function setCanvasRef(ref){\n//         if(!ref) return;\n//         if(canvasRef.current){\n//             canvasRef.current.removeEventListener(\"mousedown\", mouseDownListenerRef.current);\n//         }\n//         canvasRef.current = ref;\n//         initMouseMoveListener();\n//         initMouseDownListener();\n//         initMouseUpListener();\n//     }\n\n//     function initMouseMoveListener(){\n//         const mouseMoveListener = (e) =>{\n//             if(isDrawingRef.current == true){\n//                 const point = computePointInCanvas(e.clientX, e.clientY);\n//                 console.log('point:' + point)\n//                 // const point = {x: e.clientX, y:e.clientY};\n//                 const ctx = canvasRef.current.getContext('2d');\n//                 if(onDraw) onDraw(ctx, point);\n//             }\n//         }\n//         mouseMoveListenerRef.current = mouseMoveListener;\n//         window.addEventListener('mousemove', mouseMoveListener)\n//     }\n\n//     function initMouseDownListener(){\n//         if (!canvasRef.current) return;\n//         const listener = () => {\n//             isDrawingRef.current = true;\n//         }\n//         mouseDownListenerRef.current = listener;\n//         canvasRef.current.addEventListener(\"mousedown\", listener);\n//     }\n\n//     function initMouseUpListener(){\n//         if (!canvasRef.current) return;\n//         const listener = () => {\n//             isDrawingRef.current = false;\n//         }\n//         mouseUpListenerRef.current = listener;\n//         window.addEventListener(\"mouseup\", listener);\n//     }\n\n//     // so that x and y coords are relative to canvas, not entire window\n//     function computePointInCanvas(clientX, clientY){\n//         if(canvasRef.current){\n//             const boundingRect = canvasRef.current.getBoundingClientRect();\n//             return{\n//                 x: clientX - boundingRect.left,\n//                 y: clientY - boundingRect.top\n//             }\n//         } else{\n//             return null;\n//         }\n        \n//     }\n\n//     return setCanvasRef;\n// }\n\nimport { useEffect, useRef } from \"react\";\n\nexport function useOnDraw(onDraw){\n    const canvasRef = useRef(null);\n\n    const isDrawingRef = useRef(false);\n\n    const mouseMoveListenerRef = useRef(null);\n    const mouseDownListenerRef = useRef(null);\n    const mouseUpListenerRef = useRef(null);\n\n\n    useEffect(() => {\n        return () => {\n            if(mouseMoveListenerRef.current) {\n                window.removeEventListener(\"mousemove\", mouseMoveListenerRef.current)\n            }\n            if(mouseUpListenerRef.current) {\n                window.removeEventListener(\"mouseup\", mouseUpListenerRef.current)\n            }\n            if(canvasRef.current){\n                window.removeEventListener(\"mousedown\", mouseDownListenerRef.current);\n            }\n        }\n    })\n\n    function setCanvasRef(ref){\n        if(!ref) return;\n        \n        canvasRef.current = ref;\n        initMouseMoveListener();\n        initMouseDownListener();\n        initMouseUpListener();\n    }\n\n    function initMouseMoveListener(){\n        const mouseMoveListener = (e) =>{\n            if(isDrawingRef.current == true){\n                const point = computePointInCanvas(e.clientX, e.clientY);\n                console.log('point:' + point.x, point.y)\n                // const point = {x: e.clientX, y:e.clientY};\n                const ctx = canvasRef.current.getContext('2d');\n                if(onDraw) onDraw(ctx, point);\n            }\n        }\n        mouseMoveListenerRef.current = mouseMoveListener;\n        window.addEventListener('mousemove', mouseMoveListener)\n    }\n\n    function initMouseDownListener(){\n        if (!canvasRef.current) return;\n        const listener = () => {\n            isDrawingRef.current = true;\n        }\n        mouseDownListenerRef.current = listener;\n        // canvasRef.current.addEventListener(\"mousedown\", listener);\n        window.addEventListener(\"mousedown\", listener);\n    }\n\n    function initMouseUpListener(){\n        if (!canvasRef.current) return;\n        const listener = () => {\n            isDrawingRef.current = false;\n        }\n        mouseUpListenerRef.current = listener;\n        window.addEventListener(\"mouseup\", listener);\n    }\n\n    // so that x and y coords are relative to canvas, not entire window\n    function computePointInCanvas(clientX, clientY){\n        if(canvasRef.current){\n            const boundingRect = canvasRef.current.getBoundingClientRect();\n            console.log('boundingRect:'+ boundingRect + 'top:'+ boundingRect.top + ', '+boundingRect.left)\n            return{\n                x: (clientX - boundingRect.left) /  ((boundingRect.right - boundingRect.left)/300),\n                y: (clientY - boundingRect.top) / ((boundingRect.bottom - boundingRect.top)/150)\n            }\n        } else{\n            return null;\n        }\n        \n    }\n\n    return setCanvasRef;\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}